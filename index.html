<!DOCTYPE html>
<html style="height: 100%;"><script src="mfp_files/inject.js"></script><head>
    <title>MFP staking contract</title>
    <!-- all the meta tags --><meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta content="Rae" name="description">
<meta content="nece" name="author"><link rel="shortcut icon" href="http://localhost/http/raescript/upload_files/orig/frontend/photo/20d0b8ce83eda4d24bc9fc14292e2d95b459e3c0.jpg">
<!-- third party css -->
<link href="mfp_files/jquery-jvectormap-1.css" rel="stylesheet" type="text/css">
<link href="mfp_files/dataTables.css" rel="stylesheet" type="text/css">
<link href="mfp_files/responsive.css" rel="stylesheet" type="text/css">
<link href="mfp_files/buttons.css" rel="stylesheet" type="text/css">
<link href="mfp_files/select.css" rel="stylesheet" type="text/css">
<link href="mfp_files/summernote-bs4.css" rel="stylesheet" type="text/css">
<link href="mfp_files/fullcalendar.css" rel="stylesheet" type="text/css">
<link href="mfp_files/dropzone.css" rel="stylesheet" type="text/css">
<!-- third party css end -->
<!-- App css -->
<link href="mfp_files/app.css" rel="stylesheet" type="text/css">
<link href="mfp_files/icons.css" rel="stylesheet" type="text/css">

<link href="mfp_files/main.css" rel="stylesheet" type="text/css">
<link href="mfp_files/app_theme.css" rel="stylesheet" type="text/css">

<!-- font awesome 5 -->
<link href="mfp_files/fontawesome-all.css" rel="stylesheet" type="text/css">
<link href="mfp_files/fontawesome-iconpicker.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="mfp_files/bootstrap-tagsinput.css">
<link href="mfp_files/notifier.css" rel="stylesheet" type="text/css">

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
<script src="https://cdn.ethers.io/lib/ethers-5.6.umd.min.js" type="application/javascript"></script>
<script src="mfp_files/jquery-3.js" charset="utf-8"></script>
<script src="mfp_files/onDomChange.js"></script><style type="text/css">/* Chart.js */
@-webkit-keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}@keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}.chartjs-render-monitor{-webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;}</style><link type="text/css" rel="stylesheet" charset="UTF-8" href="mfp_files/translateelement.css">
<!--<script type="text/javascript" charset="UTF-8" src="mfp_files/mel_main"></script>

-->
</head>
<body data-layout="detached" style="position: relative; min-height: 100%; top: 0px;">
    <!-- HEADER --><!-- Topbar Start -->
<div class="navbar-custom topnav-navbar topnav-navbar-dark">
    <div class="container-fluid">
        <!-- LOGO -->
        <a href="" class="topnav-logo" style="min-width: unset;">
            <span class="topnav-logo-lg">
                <img src="mfp_files/19975bcb72a9c329a00e69185d14cc08b248449f.html" alt="" height="40">
            </span>
            <span class="topnav-logo-sm">
                <img src="mfp_files/4b1514bb6e336e79e2dad2649af90f9d284758c5.html" alt="" height="40">
            </span>
        </a>

        <ul class="list-unstyled topbar-right-menu float-right mb-0">
            <li class="dropdown notification-list topbar-dropdown d-none">
                <a class="nav-link dropdown-toggle arrow-none" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                    <span class="align-middle">language</span> <i class="mdi mdi-chevron-down"></i>
                </a>
                <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated topbar-dropdown-menu" x-placement="bottom-end" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(-59px, 72px, 0px);">

                    
                    <!-- item-->

                </div>
            </li>
                <li class="dropdown notification-list d-none">
                    <a class="nav-link dropdown-toggle arrow-none" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                        <i class="dripicons-view-apps noti-icon"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated dropdown-lg p-0 mt-5 border-top-0" x-placement="bottom-end" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(-278px, 70px, 0px);">

                        <div class="rounded-top py-3 border-bottom bg-primary">
                            <h4 class="text-center text-white">quick_actions</h4>
                        </div>

                        <div class="row row-paddingless" style="padding-left: 15px; padding-right: 15px;">
                            <!--begin:Item-->
                                <div class="col-6 p-0 border-bottom border-right">
                                    <a href="http://localhost/http/raescript/user/account/user/test_video" class="d-block text-center py-3 bg-hover-light">
                                        <i class="dripicons-archive text-20"></i>
                                        <span class="w-100 d-block text-muted">add_course</span>
                                    </a>

                                    <a href="http://localhost/http/raescript/user/account/user/course_form/add_course" class="d-block text-center py-3 bg-hover-light" onclicks="showAjaxModal('course_form/add_course_shortcut', 'create_course')">
                                        <i class="dripicons-archive text-20"></i>
                                        <span class="w-100 d-block text-muted">add_course</span>
                                    </a>

                                </div>

                                <div class="col-6 p-0 border-bottom">
                                    <a href="#" class="d-block text-center py-3 bg-hover-light" onclick="showAjaxModal('modal/popup/lesson_types/add_shortcut_lesson', 'add_new_lesson')">
                                        <i class="dripicons-media-next text-20"></i>
                                        <span class="d-block text-muted">add_lesson</span>
                                    </a>
                                </div>


                                <div class="col-6 p-0 border-right">
                                    <a href="#" class="d-block text-center py-3 bg-hover-light" onclick="showAjaxModal('modal/popup/shortcut_add_student', 'add_student')">
                                        <i class="dripicons-user text-20"></i>
                                        <span class="w-100 d-block text-muted" add_student<="" span="">
                                    </span></a>
                                </div>

                                <div class="col-6 p-0">
                                    <a href="#" class="d-block text-center py-3 bg-hover-light" onclick="showAjaxModal('modal/popup/shortcut_enrol_student', 'enrol_a_student')">
                                        <i class="dripicons-network-3 text-20"></i>
                                        <span class="d-block text-muted" enrol_student<="" span="">
                                    </span></a>
                                </div>

                        </div>
                    </div>
                </li>

            <li class="dropdown notification-list">
                <a class="nav-link dropdown-toggle nav-user arrow-none mr-0 topnav-navbar-dark" data-toggle="dropdown" id="topbar-userdrop" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                <span class="account-user-avatar">
                    <img src="mfp_files/placeholder.png" alt="user-image" class="rounded-circle">
                </span>
                <span style="color: #fff;">

                    <span class="account-user-name"></span>
                    <span class="account-position"></span>
                </span>
            </a>
            <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated topbar-dropdown-menu profile-dropdown" aria-labelledby="topbar-userdrop">
            <!-- item-->
            <div class=" dropdown-header noti-title">
                <h6 class="text-overflow m-0">welcome nike man!</h6>
            </div>

            <!-- Account -->
            <a href="http://localhost/http/raescript/user/account/manage_profile" class="dropdown-item notify-item">
                <i class="mdi mdi-account-circle mr-1"></i>
                <span>My account</span>
            </a>

            <!-- Logout-->
            <a href="http://localhost/http/raescript/user/logout" class="dropdown-item notify-item">
                <i class="mdi mdi-logout mr-1"></i>
                <span>Logout</span>
            </a>

        </div>
    </li>
</ul>
<a class="button-menu-mobile disable-btn">
    <div class="lines">
        <span></span>
        <span></span>
        <span></span>
    </div>
</a>
<div class="visit_website">
    <h4 style="color: #fff; float: left;" class="d-none d-md-inline-block"></h4>
    <a href="./" target="" class="btn btn-outline-light ml-3 d-none d-md-inline-block">home</a>
</div>
</div>
</div>
<!-- end Topbar -->    <div class="container-fluid">
    <div id='notifier' style='display:none;'></div>
        <div class="wrapper">
            <!-- BEGIN CONTENT -->
            <!-- SIDEBAR -->            <!-- PAGE CONTAINER-->
            <div class="content-page">
                <div class="content">
                    <!-- BEGIN PlACE PAGE CONTENT HERE --><!-- start page title -->

<div class="row ">
    <div class="col-xl-12">
        <div class="card">
            <div class="card-body">
                <h4 class="page-title"> <i class="mdi mdi-apple-keyboard-command title_icon"></i> MFP Contract
                    <a href="javascript:void(0)" class="btn btn-outline-primary btn-rounded alignToTitle d-none" onclick=""><i class="mdi mdi-plus"></i>Request a new withdrawal</a>
                </h4>
            </div> <!-- end card body-->
            <div class="card-footer d-none">   <span class="text-muted">N/B: Previous pending payouts must be cleared before new request can be made.</span></div>
        </div> <!-- end card -->
    </div><!-- end col-->
</div>

<div class="row justify-content-center">
    <div class="col-lg-4">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <div class="float-right bg-white">
                    <i class="mdi mdi-currency-usd widget-icon text-success"></i>
                </div>
                <h5 class="text-white font-weight-normal mt-0" title="Account balance">MFPTOKEN</h5>
                <h4 class="mt-3 mb-3 pt-1">
                    <span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span>
                     <span id='admin_tokenBalance' class='mr-1 float-right'>0.00</span>Balance
                </h4>
                <h4 class="mt-3 mb-3">
                    <span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span>
                    <span id='admin_tokenSupply' class='mr-1 float-right'>0.00</span> Supply
                </h4>

                <div class='card-footer bg-warning'>
                    <div class='input-group'>
                        <input type='number' class='form-control' placeholder="amount" id='transfer_inp' step='0.01' min='0.01' max='1000000'/><button type='button' class='btn btn-secondary' onclick="transferToContract('transfer_inp')">Transfer to contract</button>
                    </div>
                    <small class="badge badge-secondary">Only admin</small>
                </div>
                
            </div> <!-- end card-body-->
        </div> <!-- end card-->

    </div> <!-- end col-->

    <div class="col-lg-4 pull-right">
        <div class="card text-white bg-primary">
            <div class="card-body">
                <div class="float-right bg-white">
                    <i class="mdi mdi-currency-usd widget-icon text-info"></i>
                </div>
                <h5 class="text-white font-weight-normal mt-0" title="Total payout">MFPNFT</h5>
                <h4 class="mt-3 mb-5 pt-1">
                    <span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span>
                    Supply<span id='admin_nftSupply' class='mr-1 float-right'>0.00</span>
                </h4>
                <div class='card-footer bg-primary'>
                    <div class='input-group'>
                        <input type='number' class='form-control' placeholder="amount" id='mint_inp' min='1' step='1'/><span class="pl-1 pr-1 pt-1">To</span><input class='form-control' id='userAddress' value="0x2e05453eE30cB0f66dB7d328DfccB4f00506aF07" placeholder="user address"/><button type='button' class='btn btn-secondary' onclick="mintToUser('mint_inp')">Mint to user</button>
                    </div>
                    <small class="badge badge-secondary">Only admin</small>
                </div>
            </div> <!-- end card-body-->
        </div> <!-- end card-->

    </div> <!-- end col-->

    <div class="col-lg-4 pull-right">
        <div class="card text-white bg-primary">
            <div class="card-body mb-5">
                <div class="float-right bg-white">
                    <i class="mdi mdi-currency-usd widget-icon text-info"></i>
                </div>
                <h5 class="text-white font-weight-normal mt-2" title="Total payout">Staking contract</h5>
                <h4 class="mt-3 mb-5">
                    <span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span>
                    MFPTOKEN Balance<span id='staker_tokenBalance' class='mr-1 float-right'>0.00</span>
                </h4>
            </div> <!-- end card-body-->
        </div> <!-- end card-->

    </div> <!-- end col-->
</div>


<div class="row ">
    <div class="col-xl-12">
        <div class="card">
            <div class="card-body">
                <h4 class="page-title"> <i class="mdi mdi-apple-keyboard-command title_icon"></i> User account
                </h4>
            </div> <!-- end card body-->
        </div> <!-- end card -->
    </div><!-- end col-->
</div>


<div class="row justify-content-center">
    <div class="col-lg-6">
        <div class="card text-white bg-success">
            <div class="card-body">
                <div class="float-right bg-white">
                    <i class="mdi mdi-currency-usd widget-icon text-success"></i>
                </div>
                <h5 class="text-white font-weight-normal mt-0" title="Account balance">MFPTOKEN</h5>
                <h4 class="mt-3 mb-3 pt-1">
                    <span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span>
                     Balance <span id='user_tokenBalance' class='mr-1 float-right'>0.00</span>
                </h4>
                <h4 class="mt-3 mb-3">
                    <span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span>
                     Unclaimed rewards <span id='user_unclaimedRewards' class='mr-1 float-right'>0.00</span>
                </h4>

                <div class='card-footer bg-success'>
                    <div class='input-group'>
                        <button type="button" class="btn btn-secondary w-100" onclick="claimAll()">Claim all</button>
                    </div>
                    <small class="badge badge-secondary">Only user</small>
                </div>
                
            </div> <!-- end card-body-->
        </div> <!-- end card-->
    </div> <!-- end col-->

    <div class="col-lg-6 pull-right">
        <div class="card text-white bg-info">
            <div class="card-body mb-4">
                <div class="float-right bg-white">
                    <i class="mdi mdi-currency-usd widget-icon text-info"></i>
                </div>
                <h5 class="text-white font-weight-normal mb-4 pt-2" title="Total payout">MFP NFT</h5>
                <h4 class="mt-3 pt-1">
                    <span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span>
                    Balance<span id='user_nftbalance' class='mr-1 float-right'>0</span>
                </h4>
				<h4 class="mt-3">
                    <span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span>
                    Staked<button type="button" id="user_withdraw_btn" class="btn btn-secondary ml-1" onclick="withdraw()">Withdraw</button><span id='user_staked_tokens' class='mr-1 float-right'>0</span>
                </h4>
				<div id='user_isApprovedForAll_btn' class='card-footer bg-info'>
                    <div class='input-group'>
                        <button type="button" class="btn btn-secondary" onclick="approveStaker()">Approve staker contract</button>
                    </div>
                    <small class="badge badge-secondary">Only user</small>
                </div>
            </div> <!-- end card-body-->
        </div> <!-- end card-->

        <div id="nft_div"></div>

        <div class="row justify-content-center d-none">

            <div class="col-lg-12">
                <div class="card text-white bg-warnings">
                    <div class="card-body mb-4">

                    </div> <!-- end card-body-->
                </div> <!-- end card-->
            </div> <!-- end col-->

        </div>

    </div> <!-- end col-->

    <div class="col-lg-4 pull-right d-none">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <div class="float-right bg-white">
                    <i class="mdi mdi-currency-usd widget-icon text-warning"></i>
                </div>
                <h5 class="text-white font-weight-normal mt-0" title="Pending payout">Pending payout</h5>
                    <h3 class="mb-3 mt-3"><span class="text-white"><i class="mdi mdi-arrow-down-bold"></i></span> 0.00 PTS</h3>
                    <a href="javascript:void(0)" class="btn btn-icon btn-danger btn-sm d-none" onclick="confirm_modal('clear_all_pending_payouts');" style="float: right; margin-top: -18px;"> <i class="mdi mdi-delete"></i>Cancel requested withdrawal</a>
            </div> <!-- end card-body-->
        </div> <!-- end card-->
    </div> <!-- end col-->
</div>

<script type="text/javascript">
$(document).ready(function() {
    initDataTable(['#revenue-datatable', '#completed_payouts-datatable','#pending_payouts-datatable']);
});
</script><script type="text/javascript">
function showAjaxModal(url, header)
{
    // SHOWING AJAX PRELOADER IMAGE
    jQuery('#scrollable-modal .modal-body').html('<div style="width: 100px; height: 100px; line-height: 100px; padding: 0px; text-align: center; margin-left: auto; margin-right: auto;"><div class="spinner-border text-secondary" role="status"></div></div>');
    jQuery('#scrollable-modal .modal-title').html('loading...');
    // LOADING THE AJAX MODAL
    jQuery('#scrollable-modal').modal('show', {backdrop: 'true'});

    // SHOW AJAX RESPONSE ON REQUEST SUCCESS
    $.ajax({
        url: url,
        success: function(response)
        {
            jQuery('#scrollable-modal .modal-body').html(response);
            jQuery('#scrollable-modal .modal-title').html(header);
        }
    });
}
function showLargeModal(url, header)
{
    // SHOWING AJAX PRELOADER IMAGE
    jQuery('#large-modal .modal-body').html('<div style="width: 100px; height: 100px; line-height: 100px; padding: 0px; text-align: center; margin-left: auto; margin-right: auto;"><div class="spinner-border text-secondary" role="status"></div></div>');
    jQuery('#large-modal .modal-title').html('...');
    // LOADING THE AJAX MODAL
    jQuery('#large-modal').modal('show', {backdrop: 'true'});

    // SHOW AJAX RESPONSE ON REQUEST SUCCESS
    $.ajax({
        url: url,
        success: function(response)
        {
            jQuery('#large-modal .modal-body').html(response);
            jQuery('#large-modal .modal-title').html(header);
        }
    });
}
</script>

<!-- (Large Modal)-->
<div class="modal fade" id="large-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Large modal</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                ...
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>

<!-- Scrollable modal -->
<div class="modal fade" id="scrollable-modal" tabindex="-1" role="dialog" aria-labelledby="scrollableModalTitle" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="scrollableModalTitle">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
            </button>
        </div>
        <div class="modal-body ml-2 mr-2">

        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" data-dismiss="modal">close</button>
        </div>
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div>

<script type="text/javascript">
function confirm_modal(delete_url)
{
    jQuery('#alert-modal').modal('show', {backdrop: 'static'});
    document.getElementById('update_link').setAttribute('href' , delete_url);
}
</script>

<!-- Info Alert Modal -->
<div id="alert-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body p-4">
                <div class="text-center">
                    <i class="dripicons-information h1 text-info"></i>
                    <h4 class="mt-2">heads_up!</h4>
                    <p class="mt-3">are_you_sure?</p>
                    <button type="button" class="btn btn-info my-2" data-dismiss="modal">cancel</button>
                    <a href="#" id="update_link" class="btn btn-danger my-2">continue</a>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script type="text/javascript">

function ajax_confirm_modal(delete_url, elem_id)
{
    jQuery('#ajax-alert-modal').modal('show', {backdrop: 'static'});
    $("#appent_link_a").bind( "click", function() {
      delete_by_ajax_calling(delete_url, elem_id);
    });
}

function delete_by_ajax_calling(delete_url, elem_id){
    $.ajax({
        url: delete_url,
        success: function(response){
            console.log(response)
            var response = JSON.parse(response);
            if(response.success){
                $('#'+elem_id).fadeOut(600);
                $.NotificationApp.send("succes!", response.message ,"top-right","rgba(0,0,0,0.2)","success");
            }else{
                $.NotificationApp.send("oh_snap!", response.message ,"top-right","rgba(0,0,0,0.2)","error");
            }
        }
    });
}
</script>

<!-- Info Alert Modal -->
<div id="ajax-alert-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body p-4">
                <div class="text-center" id="appent_link">
                    <i class="dripicons-information h1 text-info"></i>
                    <h4 class="mt-2">heads_up!</h4>
                    <p class="mt-3">are_you_sure?</p>
                    <button type="button" class="btn btn-info my-2" data-dismiss="modal">cancel</button>
                    <a id="appent_link_a" href="javascript:;" class="btn btn-danger my-2" data-dismiss="modal">continue</a>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal --><!-- Footer -->
<!--
<footer class="main">
	<strong> system_name</strong> | &copy; 2018,
	<a href="footer_link
    	target="_blank">footer_text</a>
</footer>
-->
<!-- END PLACE PAGE CONTENT HERE -->
                </div>
            </div>
            <!-- END CONTENT -->
        </div>
    </div>
    <!-- all the js files -->
<!-- bundle -->
<script src="mfp_files/app.js"></script>
<!-- third party js -->
<script src="mfp_files/Chart.js"></script>
<script src="mfp_files/jquery-jvectormap-1.js"></script>
<script src="mfp_files/jquery-jvectormap-world-mill-en.js"></script>
<script src="mfp_files/jquery.js"></script>
<script src="mfp_files/dataTables.js"></script>
<script src="mfp_files/dataTables_005.js"></script>
<script src="mfp_files/responsive.js"></script>
<script src="mfp_files/dataTables_004.js"></script>
<script src="mfp_files/buttons_002.js"></script>
<script src="mfp_files/buttons_004.js"></script>
<script src="mfp_files/buttons_003.js"></script>
<script src="mfp_files/buttons.js"></script>
<script src="mfp_files/dataTables_002.js"></script>
<script src="mfp_files/dataTables_003.js"></script>
<script src="mfp_files/summernote-bs4.js"></script>
<script src="mfp_files/fullcalendar.js"></script>
<script src="mfp_files/demo_002.js"></script>
<script src="mfp_files/dropzone.js"></script>
<script src="mfp_files/datatable-initializer.js"></script>
<script src="mfp_files/fontawesome-iconpicker.js" charset="utf-8"></script>
<script src="mfp_files/bootstrap-tagsinput.js" charset="utf-8"></script>
<script src="mfp_files/bootstrap-tagsinput_002.js"></script>
<script src="mfp_files/dropzone_002.js" charset="utf-8"></script>
<script src="mfp_files/component.js" charset="utf-8"></script>
<script src="mfp_files/demo.js"></script>
<!-- dragula js-->
<script src="mfp_files/dragula.js"></script>
<!-- component js -->
<script src="mfp_files/component_002.js"></script>

<script src="mfp_files/custom.js"></script>

<script src="mfp_files/notifier.js"></script>
<!-- Dashboard chart's data is coming from this file -->
<!--?php include "dashboard-chart.php"; ?-->

<script type="text/javascript">
  $(document).ready(function() {
    $(function() {
       $('.icon-picker').iconpicker();
     });
  });
</script><script type="text/javascript">
  function togglePriceFields(elem) {
    if($("#"+elem).is(':checked')){
      $('.paid-course-stuffs').slideUp();
    }else
      $('.paid-course-stuffs').slideDown();
    }
</script>

  <script type="text/javascript">
  jQuery(document).ready(function($) {
        $.fn.dataTable.ext.errMode = 'throw';
        $('#course-datatable-server-side').DataTable({
            "processing": true,
            "serverSide": true,
            "ajax":{
                "url": "get_courses",
                "dataType": "json",
                "type": "POST",
                "data" : {selected_category_id : '0',
                          selected_status : '0',
                          selected_instructor_id : '0',
                          selected_price : '0'}
            },
            "columns": [
                { "data": "#" },
                { "data": "title" },
                { "data": "category" },
                { "data": "lesson_and_section" },
                { "data": "enrolled_student" },
                { "data": "status" },
                { "data": "price" },
                { "data": "actions" },
            ],
            "columnDefs": [{
                targets: "_all",
                orderable: false
             }]
        });
    });
  </script>

<script type="text/javascript">
  function switch_language(language) {
      $.ajax({
          url: '0',
          type: 'post',
          data: {language : language},
          success: function(response) {
              setTimeout(function(){ location.reload(); }, 500);
          }
      });
  }
</script>
<script type="text/javascript">
    $('#unpaid-instructor-revenue').mouseenter(function() {
        $('#go-to-instructor-revenue').show();
    });
    $('#unpaid-instructor-revenue').mouseleave(function() {
        $('#go-to-instructor-revenue').hide();
    });
</script>

<!-- Toastr and alert notifications scripts -->
<script type="text/javascript">
function notify(message,note='info') {
  $.NotificationApp.send(note, message ,"top-right","rgba(0,0,0,0.2)",note);
}

function error_required_field() {
  $.NotificationApp.send("oh_snap!", "please_fill_all_the_required_fields" ,"top-right","rgba(0,0,0,0.2)","error");
}
</script>
<div class="d-none"></div>
<script type="text/javascript">
  resp=''
  msg=$('#control_msg').text();
  note=$('#control_msg').attr('note');
  if(resp.length>0){
      json=$.parseJSON(resp)
      note=(json.success)?'success':'error';
      msg=json.message
      //window.alert(note)
  }
  if(msg!=null && msg.length>0) notify(msg,note);
</script>
<script>
    const nftABI=[
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "approved",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "operator",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "bool",
				"name": "approved",
				"type": "bool"
			}
		],
		"name": "ApprovalForAll",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "previousOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "OwnershipTransferred",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_user",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			}
		],
		"name": "mint",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "renounceOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "safeTransferFrom",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			},
			{
				"internalType": "bytes",
				"name": "data",
				"type": "bytes"
			}
		],
		"name": "safeTransferFrom",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "operator",
				"type": "address"
			},
			{
				"internalType": "bool",
				"name": "approved",
				"type": "bool"
			}
		],
		"name": "setApprovalForAll",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_symbol",
				"type": "string"
			}
		],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "getApproved",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "operator",
				"type": "address"
			}
		],
		"name": "isApprovedForAll",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "ownerOf",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes4",
				"name": "interfaceId",
				"type": "bytes4"
			}
		],
		"name": "supportsInterface",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "index",
				"type": "uint256"
			}
		],
		"name": "tokenByIndex",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "index",
				"type": "uint256"
			}
		],
		"name": "tokenOfOwnerByIndex",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_owner",
				"type": "address"
			}
		],
		"name": "tokensOfOwner",
		"outputs": [
			{
				"internalType": "uint256[]",
				"name": "",
				"type": "uint256[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "tokenURI",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];
    const tokenABI=[
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "subtractedValue",
				"type": "uint256"
			}
		],
		"name": "decreaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "addedValue",
				"type": "uint256"
			}
		],
		"name": "increaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_symbol",
				"type": "string"
			}
		],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];
    const stakerABI=[
	{
		"inputs": [
			{
				"internalType": "contract IERC721",
				"name": "_mfpNFT",
				"type": "address"
			},
			{
				"internalType": "contract IERC20",
				"name": "_mfpToken",
				"type": "address"
			}
		],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "previousOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "OwnershipTransferred",
		"type": "event"
	},
	{
		"inputs": [],
		"name": "claimRewards",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "mfpNFT",
		"outputs": [
			{
				"internalType": "contract IERC721",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "mfpToken",
		"outputs": [
			{
				"internalType": "contract IERC20",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "renounceOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_newValue",
				"type": "uint256"
			}
		],
		"name": "setRewardsPerHour",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256[]",
				"name": "_tokenIds",
				"type": "uint256[]"
			}
		],
		"name": "stake",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "stakers",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "timeOfLastUpdate",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "unclaimedRewards",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "stake_address",
				"type": "address"
			}
		],
		"name": "userStakeInfo",
		"outputs": [
			{
				"internalType": "uint256[]",
				"name": "tokensStaked",
				"type": "uint256[]"
			},
			{
				"internalType": "uint256",
				"name": "_availableRewards",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256[]",
				"name": "_tokenIds",
				"type": "uint256[]"
			}
		],
		"name": "withdraw",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	}
];
    const nftAddress='0xd38F34B2879736Ddd474d9298babd85Db2B6656d';
    const tokenAddress='0x1fa1a723494710Cac6f2642DdAcCb13AB9D940D3';
    const stakerAddress='0xE95200E6819893b9eb1e513a803EdFE9FdDfc4b1';
    //const userAddress='0x2e05453eE30cB0f66dB7d328DfccB4f00506aF07';
    const adminAddress='0x109B63b6407A68B1A2bF33F2b472886F2d3A0aF3';

    //var provider,signer,stakerContract,nftContract,tokenContract;
    
   

    /*async function connectProvider(){
        provider = new ethers.providers.Web3Provider(window.ethereum)
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();

        stakerContract = new ethers.Contract(stakerAddress, stakerABI, signer);
        nftContract = new ethers.Contract(nftAddress, nftABI, signer);
        tokenContract = new ethers.Contract(tokenAddress, tokenABI, signer);
    }
*/
</script>
<script>
    var span_user_tokenBalance = document.getElementById('user_tokenBalance');
    var span_user_nftbalance = document.getElementById('user_nftbalance');
    var span_user_unclaimedRewards = document.getElementById('user_unclaimedRewards');
	var span_user_staked_tokens = document.getElementById('user_staked_tokens');
	var span_user_userAddress= document.getElementById('userAddress');
	var span_user_isApprovedForAll_btn= document.getElementById('user_isApprovedForAll_btn');
	var span_user_withdraw_btn=document.getElementById('user_withdraw_btn');
    var span_staker_tokenBalance = document.getElementById('staker_tokenBalance');
    var span_admin_tokenBalance = document.getElementById('admin_tokenBalance');
    var span_admin_tokenSupply = document.getElementById('admin_tokenSupply');
    var span_admin_nftSupply = document.getElementById('admin_nftSupply');
    var span_nft_div = document.getElementById('nft_div');

    let provider,signer,stakerContract,nftContract,tokenContract,token_decimals,user_staked_tokens_arr;
    
    async function initWallet(){

        if(window.ethereum != null){
			provider=new ethers.providers.Web3Provider(window.ethereum)
			await provider.send("eth_requestAccounts", []);
        	signer = provider.getSigner();
		}
		else signer=ethers.getDefaultProvider();


        stakerContract = new ethers.Contract(stakerAddress, stakerABI, signer);
        nftContract = new ethers.Contract(nftAddress, nftABI, signer);
        tokenContract = new ethers.Contract(tokenAddress, tokenABI, signer);
    }

    async function fetchData() {
		notifier('Loading wallet','info');
        await initWallet();
		userAddress=span_user_userAddress.value;
		
        token_decimals=await tokenContract.decimals();
        var user_tokenBalance=await tokenContract.balanceOf(userAddress);
        var user_nftbalance=await nftContract.tokensOfOwner(userAddress);
        var [user_staked_tokens,user_unclaimedRewards]=await stakerContract.userStakeInfo(userAddress);
		var user_isApprovedForAll=await nftContract.isApprovedForAll(userAddress,stakerAddress);


        var staker_tokenBalance=await tokenContract.balanceOf(stakerAddress);

        var admin_tokenBalance=await tokenContract.balanceOf(adminAddress);
        var admin_tokenSupply=await tokenContract.totalSupply();
        var admin_nftSupply=await nftContract.totalSupply();

		user_staked_tokens_arr=user_staked_tokens;
        var f_user_tokenBalance=safeFormatUnits(user_tokenBalance, token_decimals);
        var f_user_nftbalance=safeFormatUnits(user_nftbalance.length,0);
		var f_user_staked_tokens=user_staked_tokens.length;
		var f_user_unclaimedRewards=safeFormatUnits(user_unclaimedRewards,token_decimals);
        var f_staker_tokenBalance=safeFormatUnits(staker_tokenBalance,token_decimals);
        var f_admin_tokenBalance=safeFormatUnits(admin_tokenBalance,token_decimals);
        var f_admin_tokenSupply=safeFormatUnits(admin_tokenBalance,token_decimals);
        var f_admin_nftSupply=safeFormatUnits(admin_nftSupply,0);

        span_user_tokenBalance.innerHTML=f_user_tokenBalance;
        span_user_nftbalance.innerHTML=f_user_nftbalance;
        span_user_unclaimedRewards.innerHTML=f_user_unclaimedRewards;
		span_user_staked_tokens.innerHTML=f_user_staked_tokens;
        span_staker_tokenBalance.innerHTML=f_staker_tokenBalance;
        span_admin_tokenBalance.innerHTML=f_admin_tokenBalance;
        span_admin_tokenSupply.innerHTML=f_admin_tokenSupply;
        span_admin_nftSupply.innerHTML=f_admin_nftSupply;

		if(user_isApprovedForAll) span_user_isApprovedForAll_btn.style.display='none';
		if(!user_staked_tokens) span_user_withdraw_btn.style.display='d-none';

        if(user_nftbalance){
            var len=user_nftbalance.length;
            var nft_div='';
            for(i=0;i<len;i++){
                nft_div+="<div class='row justify-content-center'> <div class='col-lg-12'> <div class='card'> <div class='card-body mb-4'> <h4 class='mt-3 mb-4 pt-1'> <span class='text-white'><i class='mdi mdi-arrow-down-bold'></i></span> MFP NFT "+user_nftbalance[i]+"<span id='user_nftbalance_btn_"+user_nftbalance[i]+"' class='mr-1 float-right'><button type='button' class='btn btn-secondary' onclick='stake("+user_nftbalance[i]+")'>Stake</button></span></h4> </div> <!-- end card-body--> </div> <!-- end card--> </div> <!-- end col--> </div>";
            }
            span_nft_div.innerHTML=nft_div;
        }
        notifier('Loaded','info');
        //var res = await contract.greeting()
        //response.innerText = res
    }
    </script>
    <script>
    async function connectToMetamask(){
    const provider = new ethers.providers.Web3Provider(window.ethereum, "any");
    // Prompt user for account connections
    await provider.send("eth_requestAccounts", []);
    const signer = provider.getSigner();
    console.log("Account:", await signer.getAddress());
    }

    function safeFormatUnits(_no,_decimals){
        _no=isNaN(_no)?0:_no;
        _decimals=isNaN(_decimals)?0:_decimals;
        return ethers.utils.formatUnits(_no,_decimals);
    }

    function safeparseUnits(_no,_decimals){
        _no=isNaN(_no)?0:_no;
        _decimals=isNaN(_decimals)?0:_decimals;
        return ethers.utils.parseUnits(_no,_decimals);
    }

    $('document').ready(function(){
        fetchData();
       /* const { ethereum } = window;
    if(Boolean(ethereum && ethereum.isMetaMask)) console.log('ghgvjskbnslccbiobnasci');
    else console.log('xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx');
    */
    });

    async function transferToContract(input_amount){
        await initWallet();
        var inp=document.getElementById(input_amount);
        var amount=inp.value;
        if(amount && !isNaN(amount)){
			notifier('Processing...','info');
			inp.value=0;
            amount=safeparseUnits(amount,token_decimals);
            var tx=await tokenContract.transfer(stakerAddress, amount);
            notifier(`Transaction hash: ${tx.hash}`,'info');
            var receipt=await tx.wait();
            notifier(`Transfer transaction confirmed in block ${receipt.blockNumber}`,'success');
			fetchData();
        }

    }

    async function mintToUser(input_amount){
        await initWallet();
		userAddress=span_user_userAddress.value;
        var inp=document.getElementById(input_amount);
        var amount=inp.value;
        if(amount && !isNaN(amount) && userAddress){
			notifier('Processing...','info');
			inp.value=0;
            var tx=await nftContract.mint(userAddress, amount);
            notifier(`Transaction hash: ${tx.hash}`,'info');
            var receipt=await tx.wait();
            notifier(`Mint transaction confirmed in block ${receipt.blockNumber}`,'success');
			fetchData();
        }

    }

    async function claimAll(){
        await initWallet();
		notifier('Processing...','info');
		var tx=await stakerContract.claimRewards();
		notifier(`Transaction hash: ${tx.hash}`,'info');
		var receipt=await tx.wait();
		notifier(`Claim transaction confirmed in block ${receipt.blockNumber}`,'success');
		fetchData();

    }

    async function stake(id){
        await initWallet();
        if(id){
			notifier('Processing...','info');
            var tx=await stakerContract.stake([id]);
            notifier(`Transaction hash: ${tx.hash}`,'info');
            var receipt=await tx.wait();
            notifier(`Stake transaction confirmed in block ${receipt.blockNumber}`,'success');
			fetchData();
        }

    }

	async function approveStaker(){
        await initWallet();
		notifier('Processing...','info');
		var tx=await nftContract.setApprovalForAll(stakerAddress,true);
		notifier(`Transaction hash: ${tx.hash}`,'info');
		var receipt=await tx.wait();
		notifier(`Approve transaction confirmed in block ${receipt.blockNumber}`,'success');
		fetchData();
    }

	async function withdraw(){
        await initWallet();
		notifier('Processing...','info');
		if(user_staked_tokens_arr){
			var tx=await stakerContract.withdraw(user_staked_tokens_arr);
			notifier(`Transaction hash: ${tx.hash}`,'info');
			var receipt=await tx.wait();
			notifier(`Withdrawal transaction confirmed in block ${receipt.blockNumber}`,'success');
			fetchData();
		}
    }
</script>

</div></div></body></html>